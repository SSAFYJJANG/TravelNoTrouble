<?xml version="1.0" encoding="UTF-8"?>	
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trip.vue.map.model.dao.MapDao">
	<select id="getSidoList" resultType="sidoDto">
		select *
		from sido
	</select>

	<select id="getGugunList" resultType="gugunDto">
		select * from gugun
	</select>

	<select id="getAttractionList" parameterType="int" resultType="attractionDto">
		select content_id, title, addr1, first_image, sido_code, gugun_code, longitude, latitude
		from attraction_info
		where (#{sido_code} = 0 OR sido_code = #{sido_code})
        AND (#{gugun_code} = 0 OR gugun_code = #{gugun_code})
        AND (#{content_type_id} = 0 OR content_type_id = #{content_type_id})
	</select>
	
	<select id="viewAttraction" parameterType="int" resultType="attractionDto">
		select *
		from attraction_info ai left join attraction_description ad
		on ai.content_id = ad.content_id
		where ai.content_id=#{content_id}
	</select>
	
	<select id="getTotalAttractionCount" resultType="int">
		select count(*)
		from attraction_info
	</select>
	
	<select id="getRecommendationAttraction" resultType="attractionDto">
		select *
		from attraction_info
		Order by rand()
		limit 1
	</select>
	
	<select id="getUserAttractionList" parameterType="string">
		select * from attraction_cart
		where userid=#{userid}
	</select>
	
	<insert id="insertAttraction" parameterType="map">
		insert into attraction_cart(content_id, userid)
		values (#{content_id}, #{userid})
	</insert>
	
	<delete id="deleteAttraction" parameterType="map">
		delete from attraction_cart
		where content_id=#{content_id} and userid=#{userid}
	</delete>
	
	<delete id="deleteAllAttraction" parameterType="string">
		delete from attraction_cart
		where userid=#{userid}
	</delete>
</mapper>
